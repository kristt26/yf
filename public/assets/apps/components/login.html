<!-- Button trigger modal -->
<link href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" rel="stylesheet" />
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
    data-bs-backdrop="false">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="wrapper">
                <div class="logo">
                    <img src="https://i0.wp.com/lintaspapua.com/wp-content/uploads/2018/02/GKI-DI-TANAH-PAPUA-e1543154087145.jpg?fit=992%2C954&ssl=1"
                        alt="">
                </div>
                <h5 class="text-center mt-3">Session anda habis</h5>
                <form class="p-3 mt-3" ng-submit="$ctrl.login(model)">
                    <div class="form-field d-flex align-items-center">
                        <span class="far fa-user"></span>
                        <input type="text" name="userName" id="userName" ng-model="model.username"
                            placeholder="Username" required>
                    </div>
                    <div class="form-field d-flex align-items-center">
                        <span class="fas fa-key"></span>
                        <input type="password" name="password" ng-model="model.password" id="pwd" placeholder="Password"
                            required>
                    </div>
                    <button type="submit" class="btn mt-3">Login</button>
                    <button type="button" class="btn batal mt-3" ng-click="$ctrl.batal()">Batal</button>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="changePass" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Ubah Password</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form ng-submit="$ctrl.changePassword($ctrl.item)">
                    <div class="form-group row">
                        <label for="password_lama" class="col-sm-4 col-form-label">Password Lama</label>
                        <div class="col-sm-8">
                            <input type="password" name="password_lama" class="form-control form-control-sm"
                                ng-model="$ctrl.item.passwordLama" placeholder="Password Lama" required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="password_baru" class="col-sm-4 col-form-label col-form-label-lg">Password
                            Baru</label>
                        <div class="col-sm-8">
                            <input type="password" name="password_baru" id="password" class="form-control form-control-sm"
                                ng-model="$ctrl.item.passwordBaru" placeholder="Password Baru" pattern="(?=.*\d)(?=.*[a-z])(?=.*[!@#$%^&*])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, one special characters, and at least 8 or more characters" required>
                                <span class="text-danger" id="message1" style="font-size: 13px; display: none;">Must contain at least one number and one uppercase and lowercase letter, one special characters and at least 8 or more characters</span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="confirm_password_baru" class="col-sm-4 col-form-label">Ulangi Password Baru</label>
                        <div class="col-sm-8">
                            <input type="password" name="confirm_password_baru" id="confirm_password" class="form-control form-control-sm"
                                ng-model="$ctrl.item.passwordConfirm" placeholder="Ulangi Password Baru" required>
                            <span class="text-danger" id="message" style="font-size: 13px;"></span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-12" align="right">
                            <button type="button" class="btn btn-outline-warning btn-sm" data-bs-dismiss="modal" style="color: black;"><i
                                    class="fa fa-undo-alt"></i>
                                Batal</button>
                            <button type="submit" class="btn btn-outline-primary btn-sm"><i class="fa fa-save"></i>
                                Ubah</button>
                        </div>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
<script>
    var focus = document.getElementById("confirm_password");
    var pass = document.getElementById("password");
    var lowerCaseLetters = /[a-z]/g;
    var upperCaseLetters = /[A-Z]/g;
    var numbers = /[0-9]/g;
    var special = /[!@#$%^&*]/g;
    focus.onfocus = function() {
        if(pass.value.match(lowerCaseLetters) && pass.value.match(upperCaseLetters) && pass.value.match(special) && pass.value.match(numbers) && pass.value.length>=8){
            document.getElementById("message1").style.display = "none";
        }else{
            document.getElementById("message1").style.display = "block";
        }
    }
    focus.onblur = function() {
        document.getElementById("message1").style.display = "none";
    }
    $('#password, #confirm_password').on('keyup', function () {
        if(($('#password').val()) && ($('#confirm_password').val())){
            if ($('#password').val() == $('#confirm_password').val()) {
                $('#message').html('').css('color', 'green');
            } else
                $('#message').html('Not Matching').css('color', 'red');
        }
    });
</script>
<style>
    /* Importing fonts from Google */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');

    /* Reseting */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Poppins', sans-serif;
    }

    body {
        background: #ecf0f3;
    }

    .wrapper {
        max-width: 350px;
        min-height: 390px;
        /* margin: 80px auto; */
        /* padding: 40px 30px 30px 30px; */
        background-color: #ecf0f3;
        border-radius: 15px;
        box-shadow: 13px 13px 20px #cbced1, -13px -13px 20px #fff;
    }

    .logo {
        width: 80px;
        margin: auto;
    }

    .logo img {
        width: 100%;
        height: 80px;
        margin-top: 20px;
        object-fit: cover;
        border-radius: 50%;
        box-shadow: 0px 0px 3px #5f5f5f,
            0px 0px 0px 5px #ecf0f3,
            8px 8px 15px #a7aaa7,
            -8px -8px 15px #fff;
    }

    .wrapper .name {
        font-weight: 600;
        font-size: 1.4rem;
        letter-spacing: 1.3px;
        padding-left: 10px;
        color: #555;
    }

    .wrapper .form-field input {
        /* width: 100%; */
        display: block;
        border: none;
        outline: none;
        background: none;
        font-size: 1.2rem;
        color: #666 !important;
        padding: 10px 15px 10px 10px;
        /* border: 1px solid red; */
    }

    .wrapper .form-field {
        padding-left: 10px;
        margin-bottom: 20px;
        border-radius: 20px;
        box-shadow: inset 8px 8px 8px #cbced1, inset -8px -8px 8px #fff;
    }

    .wrapper .form-field .fas {
        color: #555;
    }

    .wrapper .btn {
        box-shadow: none;
        width: 100%;
        height: 40px;
        background-color: #03A9F4;
        color: #fff;
        border-radius: 25px;
        box-shadow: 3px 3px 3px #b1b1b1,
            -3px -3px 3px #fff;
        letter-spacing: 1.3px;
    }

    .wrapper .batal {
        background-color: #fed714;
        color: #000;
    }

    .wrapper .btn:hover {
        background-color: #039BE5;
    }

    .wrapper .batal:hover {
        background-color: #e8c517;
    }

    .wrapper a {
        text-decoration: none;
        font-size: 0.8rem;
        color: #03A9F4;
    }

    .wrapper a:hover {
        color: #039BE5;
    }

    @media(max-width: 380px) {
        .wrapper {
            margin: 30px 20px;
            padding: 40px 15px 15px 15px;
        }
    }
</style>